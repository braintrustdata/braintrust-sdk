#!/bin/bash
#
# A script to install and delete packages without saving to package.json.
#


# Function to install a package without saving to package.json
install() {
    if [ -z "$1" ]; then
        echo "Usage: $0 install <package-name>"
        return 1
    fi

    npm_config_save=false npm_config_lockfile=false pnpm add "$1"
}

delete() {
    if [ -z "$1" ]; then
        echo "Usage: $0 delete <package-name>"
        return 1
    fi

    # FIXME[matt] perhaps pnpm prune is better

    cd "$(dirname "$0")"

    rm -r node_modules/$1

    cd - > /dev/null
}

# Main function to handle command-line arguments
main() {
    case "$1" in
        "install")
            install "$2"
            ;;
        "delete")
            delete "$2"
            ;;

        *)
            echo "Usage: $0 {install|delete} [args...]"
            echo "  install <package>  - Install a package"
            echo "  delete <package>   - Delete a package"
            exit 1
            ;;
    esac
}

# Call main function with all arguments
main "$@"
